<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>game</title>
		<meta name="description" content="" />
		<meta name="author" content="Marcilio" />

		<meta name="viewport" content="width=device-width; initial-scale=1.0" />

		<!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
		
		<script src="enchant.min.js"></script>
	</head>

	<body>
		
		<script>
			Character = enchant.Class.create(enchant.Sprite, {
				initialize: function() {
					Sprite.call(this, 36, 59);
					this.image = game.assets['chara.png'];
				},
				onenterframe: function() {
					
				},
				ontouchend: function() {
					
				},
			    walkTo: function(x, y){
			    	var distance = Math.sqrt(Math.pow(this.x - x, 2) + Math.pow(this.y - y, 2));
			    	var speed = 5; 
			        this.tl.clear();
			        this.tl.repeat(function(){
			            this.frame = this.age % 2 + 5;
			        }, 30).and().moveTo(x, y, distance / speed);
			    }
			});
		
			window.onload = function () {
				enchant();
				game = new Game(800, 600); 
				game.preload('chara.png');
				game.scale = 1;

				game.onload = function() {
					var scene = new Scene();
					var character = new Character();
					scene.addChild(character);
					scene.addEventListener('touchstart', function(evt) {
						character.walkTo(evt.localX - (character.width / 2), evt.localY - (character.height / 2));
					});
					game.pushScene(scene);
				};
				game.start();
			};
		</script>
	</body>
</html>
